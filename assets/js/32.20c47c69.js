(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{395:function(t,s,a){"use strict";a.r(s);var e=a(25),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"обновление-до-v4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#обновление-до-v4"}},[t._v("#")]),t._v(" Обновление до v4")]),t._v(" "),a("p",[t._v("VK-IO v4 — это следующее мажорное обновление. Ниже приведён список критических изменений, который поможет вам обновиться.")]),t._v(" "),a("h2",{attrs:{id:"tl-dr"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tl-dr"}},[t._v("#")]),t._v(" TL;DR")]),t._v(" "),a("ul",[a("li",[t._v("Были произведены серьёзные изменения в типизации библиотеки")]),t._v(" "),a("li",[t._v("Библиотека теперь полностью следует "),a("a",{attrs:{href:"https://ru.wikipedia.org/wiki/%D0%9D%D0%B5%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D1%8F%D0%B5%D0%BC%D1%8B%D0%B9_%D0%BE%D0%B1%D1%8A%D0%B5%D0%BA%D1%82",target:"_blank",rel:"noopener noreferrer"}},[t._v("immutable"),a("OutboundLink")],1),t._v(" принципу.")]),t._v(" "),a("li",[t._v("Каждый компонент теперь не зависит от основной инстанции "),a("code",[t._v("VK")])]),t._v(" "),a("li",[t._v("Убраны лишние компоненты в пользу простых функций (например "),a("code",[t._v("resolveResource()")]),t._v(" или "),a("code",[t._v("createCollectIterator()")]),t._v(")")])]),t._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[t._v("Если ещё короче")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-images.githubusercontent.com/9392723/89174354-6d7cd480-d5d1-11ea-8336-9ad40152b812.png",alt:"cheems meme"}})])]),t._v(" "),a("h2",{attrs:{id:"breaking-сhanges"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#breaking-сhanges"}},[t._v("#")]),t._v(" Breaking Сhanges")]),t._v(" "),a("h3",{attrs:{id:"поддержка-node-js-12-и-выше"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#поддержка-node-js-12-и-выше"}},[t._v("#")]),t._v(" Поддержка Node.js 12 и выше")]),t._v(" "),a("p",[t._v("Библиотека поддерживает теперь только Node.js 12 и выше.")]),t._v(" "),a("h3",{attrs:{id:"vk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vk"}},[t._v("#")]),t._v(" VK")]),t._v(" "),a("ul",[a("li",[t._v("Удалён геттер/сеттер "),a("code",[t._v("vk.token")])]),t._v(" "),a("li",[t._v("Удалён метод "),a("code",[t._v("vk.setOptions()")])]),t._v(" "),a("li",[t._v("Удалён сеттер "),a("code",[t._v("vk.captchaHandler")]),t._v(", используйте метод "),a("code",[t._v("vk.callbackService.onCaptcha()")])]),t._v(" "),a("li",[t._v("Удалён сеттер "),a("code",[t._v("vk.twoFactorHandler")]),t._v(", используйте метод "),a("code",[t._v("vk.callbackService.onTwoFactor()")])]),t._v(" "),a("li",[t._v("Удалён модуль "),a("code",[t._v("vk.auth")]),t._v(", используйте вместо этого пакет "),a("a",{attrs:{href:"https://github.com/negezor/vk-io/tree/master/packages/authorization",target:"_blank",rel:"noopener noreferrer"}},[t._v("@vk-io/authorization"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("Удалён модуль "),a("code",[t._v("vk.streaming")]),t._v(", используйте вместо этого пакет "),a("a",{attrs:{href:"https://github.com/negezor/vk-io/tree/master/packages/streaming",target:"_blank",rel:"noopener noreferrer"}},[t._v("@vk-io/streaming"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("Удалён экспорт по умолчанию, используйте именованный")])]),t._v(" "),a("div",{staticClass:"language-diff extra-class"},[a("pre",{pre:!0,attrs:{class:"language-diff"}},[a("code",[a("span",{pre:!0,attrs:{class:"token deleted-sign deleted"}},[a("span",{pre:!0,attrs:{class:"token prefix deleted"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token line"}},[t._v(" import VK from 'vk-io';\n")])]),a("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[a("span",{pre:!0,attrs:{class:"token prefix inserted"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token line"}},[t._v(" import { VK } from 'vk-io';\n")])])])])]),a("ul",[a("li",[t._v("Удалён "),a("code",[t._v("vk.snippets.resolveResource()")]),t._v(", вместо модуля добавлена функция "),a("code",[t._v("resolveResource()")]),t._v("\nПринимает опции вида:")])]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IResolveResourceOptions")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tresource"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tapi"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Например")]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" resolveResource "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vk-io'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveResource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Объект API")]),t._v("\n\tapi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n\tresource"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://vk.com/durov'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("Удалён "),a("code",[t._v("vk.collect")]),t._v(", модуль разбит на мелкие классы и функции")]),t._v(" "),a("li",[a("ul",[a("li",[a("strong",[t._v("collect.chain()")]),t._v(" - используйте класс "),a("code",[t._v("new Chain()")])])])])]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Chain "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vk-io'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" chain "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Chain")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Объект API")]),t._v("\n\tapi\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[a("ul",[a("li",[a("strong",[t._v("collect.executes()")]),t._v(" - используйте функцию "),a("code",[t._v("executes()")]),t._v("\nПринимает опции вида:")])])])]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IExecutesOptions")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tapi"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\tmethod"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// eslint-disable-next-line @typescript-eslint/no-explicit-any")]),t._v("\n\tqueue"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Например")]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" executes "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vk-io'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("executes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Объект API")]),t._v("\n\tapi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\n\tmethod"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'users.get'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tqueue"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" user_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" user_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" user_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[a("ul",[a("li",[a("strong",[t._v("collect."),a("em",[t._v(".")]),t._v("()")]),t._v(" - используйте функцию "),a("code",[t._v("createCollectIterator()")]),t._v("\nПринимает опции вида:")])])])]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ICollectIteratorOptions")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tapi"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\tmethod"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tparams"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tcount"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\toffset"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\tmaxCount"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tcountPerRequest"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\tretryLimit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tparallelRequests"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Например")]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createCollectIterator "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vk-io'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" iterator "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createCollectIterator")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Объект API")]),t._v("\n\tapi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n\tmethod"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'messages.getConversations'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tparams"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Будет получать profiles и groups")]),t._v("\n\t\textended"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Максимальный count в методе")]),t._v("\n\tcountPerRequest"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Устанавливайте опцию для методов которые не позволяет получить больше N данных, например `users.search`")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// maxCount: 1000,")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Количество попыток вызвать снова при ошибке")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// retryLimit: 3,")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Количество паралельных вызовов если поддерживается execute")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// parallelRequests: 25")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" chunk "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" iterator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// chunk.received")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// chunk.percent")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// chunk.total")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// chunk.items")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// chunk.profiles")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// chunk.groups")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),a("ul",[a("li",[t._v("Переименование опции "),a("strong",[t._v("apiAttempts")]),t._v(" в "),a("strong",[t._v("apiRetryLimit")])]),t._v(" "),a("li",[t._v("Удалён геттер "),a("code",[t._v("vk.api.API_VERSION")])]),t._v(" "),a("li",[t._v("Enum "),a("code",[t._v("APIErrorCode")]),t._v(" теперь автоматический генерируется из "),a("a",{attrs:{href:"https://github.com/VKCOM/vk-api-schema",target:"_blank",rel:"noopener noreferrer"}},[t._v("схемы"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("Объкты схемы теперь экспортируются в своих namespace "),a("code",[t._v("Params")]),t._v(", "),a("code",[t._v("Objects")]),t._v(" и "),a("code",[t._v("Responses")])]),t._v(" "),a("li",[t._v("Удалена автоматическая верификация аккаунта, используйте "),a("code",[t._v("@vk-io/authorization")]),t._v(" класс "),a("code",[t._v("AccountVerification")])]),t._v(" "),a("li",[t._v("Удалена автоматическая установка "),a("code",[t._v("random_id")]),t._v(" в "),a("code",[t._v("api.messages.send()")]),t._v(", используйте вместо этого функцию "),a("code",[t._v("getRandomId()")])])]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" getRandomId "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vk-io'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("messages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tpeer_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1234")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\trandom_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRandomId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n\ttext"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello!'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"apirequest"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#apirequest"}},[t._v("#")]),t._v(" APIRequest")]),t._v(" "),a("ul",[a("li",[t._v("Конструктор теперь принимает опции вида:")])]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IAPIRequestOptions")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tapi"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\tmethod"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tparams"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("Удалён алиас "),a("code",[t._v("Request")]),t._v(", используйте "),a("code",[t._v("APIRequest")])])]),t._v(" "),a("h3",{attrs:{id:"attachment-externalattachment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#attachment-externalattachment"}},[t._v("#")]),t._v(" Attachment & ExternalAttachment")]),t._v(" "),a("ul",[a("li",[t._v("Конструктор теперь принимает опции вида:")])]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ISharedAttachmentPayload")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\towner_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\taccess_key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IAttachmentOptions"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("P")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Type "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tapi"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tpayload"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Partial"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ISharedAttachmentPayload"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("P")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"documentattachment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#documentattachment"}},[t._v("#")]),t._v(" DocumentAttachment")]),t._v(" "),a("ul",[a("li",[t._v("Удалён геттер "),a("code",[t._v("document.typeName")])])]),t._v(" "),a("h3",{attrs:{id:"context"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#context"}},[t._v("#")]),t._v(" Context")]),t._v(" "),a("ul",[a("li",[t._v("Конструктор теперь принимает опции вида:")])]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IContextOptions"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("P")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("S")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tType "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tSubType "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tapi"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tupload"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Upload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tsubTypes"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" SubType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\tpayload"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("P")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tstate"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("S")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\tsource"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" UpdateSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tupdateType"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\tgroupId"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("Метод "),a("code",[t._v("context.is()")]),t._v(" принимает теперь массив типов")])]),t._v(" "),a("h3",{attrs:{id:"messagecontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#messagecontext"}},[t._v("#")]),t._v(" MessageContext")]),t._v(" "),a("ul",[a("li",[t._v("Метод "),a("code",[t._v("context.send()")]),t._v(" теперь возвращает инстанцию "),a("code",[t._v("MessageContext")])]),t._v(" "),a("li",[t._v("Геттер "),a("code",[t._v("context.replyMessage")]),t._v(" теперь возвращает "),a("code",[t._v("MessageContext")]),t._v(" вместо "),a("code",[t._v("MessageReply")])]),t._v(" "),a("li",[t._v("Геттер "),a("code",[t._v("context.forwards")]),t._v(" теперь возвращает массив "),a("code",[t._v("MessageContext")]),t._v(" вместо "),a("code",[t._v("MessageForward")])]),t._v(" "),a("li",[t._v("Изменились входные параметры для методов "),a("code",[t._v("context.sendPhotos()")]),t._v(", "),a("code",[t._v("context.sendDocuments()")]),t._v(", "),a("code",[t._v("context.sendAudioMessage()")]),t._v(" и "),a("code",[t._v("context.sendAudioMessage()")]),t._v(". Теперь они принимают объект.")])]),t._v(" "),a("p",[t._v("Было:")]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendPhotos")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./cat.png'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Стало:")]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendPhotos")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tvalue"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./cat.png'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// filename: 'cat.png',")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// contentType: 'image/png',")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// contentLength: ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Или")]),t._v("\n\ncontext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendPhotos")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tvalues"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tvalue"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./cat.png'")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// filename: 'cat.png',")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// contentType: 'image/png'")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// contentLength: ...")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// timeout: 30_000,")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// uploadUrl: '...'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("Удалён метод "),a("code",[t._v("context.getInviteLink()")])]),t._v(" "),a("li",[t._v("Удалён метод "),a("code",[t._v("context.markAsImportant()")])]),t._v(" "),a("li",[t._v("Удалён метод "),a("code",[t._v("context.renameChat()")])]),t._v(" "),a("li",[t._v("Удалён метод "),a("code",[t._v("context.newChatPhoto()")])]),t._v(" "),a("li",[t._v("Удалён метод "),a("code",[t._v("context.deleteChatPhoto()")])]),t._v(" "),a("li",[t._v("Удалён метод "),a("code",[t._v("context.inviteUser()")])]),t._v(" "),a("li",[t._v("Удалён метод "),a("code",[t._v("context.kickUser()")])]),t._v(" "),a("li",[t._v("Удалён метод "),a("code",[t._v("context.pinMessage()")])]),t._v(" "),a("li",[t._v("Удалён метод "),a("code",[t._v("context.unpinMessage()")])]),t._v(" "),a("li",[t._v("Удалён метод "),a("code",[t._v("context.editMessageText()")])]),t._v(" "),a("li",[t._v("Удалён метод "),a("code",[t._v("context.sendSticker()")]),t._v(", используйте "),a("code",[t._v("context.send({ sticker_id: 123 })")])])]),t._v(" "),a("h3",{attrs:{id:"commentactioncontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commentactioncontext"}},[t._v("#")]),t._v(" CommentActionContext")]),t._v(" "),a("ul",[a("li",[t._v("Переименован в "),a("code",[t._v("CommentContext")])])]),t._v(" "),a("h3",{attrs:{id:"commentcontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commentcontext"}},[t._v("#")]),t._v(" CommentContext")]),t._v(" "),a("ul",[a("li",[t._v("Удалён геттер "),a("code",[t._v("context.userId")]),t._v(", используйте "),a("code",[t._v("context.fromId")])]),t._v(" "),a("li",[t._v("Удалён геттер "),a("code",[t._v("context.removerUserId")]),t._v(", используйте "),a("code",[t._v("context.deleterUserId")])])]),t._v(" "),a("h3",{attrs:{id:"messageflagscontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#messageflagscontext"}},[t._v("#")]),t._v(" MessageFlagsContext")]),t._v(" "),a("ul",[a("li",[t._v("Переименован подтип "),a("code",[t._v("message_flags_update")]),t._v(" в "),a("code",[t._v("message_flags_replace")])]),t._v(" "),a("li",[t._v("Переименован подтип "),a("code",[t._v("message_flags_set")]),t._v(" в "),a("code",[t._v("message_flags_add")])]),t._v(" "),a("li",[t._v("Переименован геттер "),a("code",[t._v("context.isChat")]),t._v(" в "),a("code",[t._v("context.isFromWebChat")])]),t._v(" "),a("li",[t._v("Переименован геттер "),a("code",[t._v("context.isFriends")]),t._v(" в "),a("code",[t._v("context.isFriendMessage")])]),t._v(" "),a("li",[t._v("Переименован геттер "),a("code",[t._v("context.isSpam")]),t._v(" в "),a("code",[t._v("context.isMarkSpam")])]),t._v(" "),a("li",[t._v("Переименован геттер "),a("code",[t._v("context.isSpam")]),t._v(" в "),a("code",[t._v("context.isUnmarkSpam")])]),t._v(" "),a("li",[t._v("Удалён геттер "),a("code",[t._v("context.isFixed")])]),t._v(" "),a("li",[t._v("Удалён геттер "),a("code",[t._v("context.isMedia")])])]),t._v(" "),a("h3",{attrs:{id:"dialogflagscontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dialogflagscontext"}},[t._v("#")]),t._v(" DialogFlagsContext")]),t._v(" "),a("ul",[a("li",[t._v("Переименован подтип "),a("code",[t._v("dialog_flags_update")]),t._v(" в "),a("code",[t._v("dialog_flags_replace")])]),t._v(" "),a("li",[t._v("Переименован подтип "),a("code",[t._v("dialog_flags_set")]),t._v(" в "),a("code",[t._v("dialog_flags_add")])])]),t._v(" "),a("h3",{attrs:{id:"removedmessagescontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#removedmessagescontext"}},[t._v("#")]),t._v(" RemovedMessagesContext")]),t._v(" "),a("ul",[a("li",[t._v("Переименован в "),a("code",[t._v("DialogMessagesContext")])])]),t._v(" "),a("h3",{attrs:{id:"dialogmessagescontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dialogmessagescontext"}},[t._v("#")]),t._v(" DialogMessagesContext")]),t._v(" "),a("ul",[a("li",[t._v("Переименован подтип "),a("code",[t._v("messages_delete")]),t._v(" в "),a("code",[t._v("dialog_messages_delete")])]),t._v(" "),a("li",[t._v("Переименован подтип "),a("code",[t._v("messages_restore")]),t._v(" в "),a("code",[t._v("dialog_messages_restore")])]),t._v(" "),a("li",[t._v("Переименован геттер "),a("code",[t._v("context.id")]),t._v(" в "),a("code",[t._v("context.localId")])]),t._v(" "),a("li",[t._v("Переименован геттер "),a("code",[t._v("context.isRemoved")]),t._v(" в "),a("code",[t._v("context.isDelete")])]),t._v(" "),a("li",[t._v("Переименован геттер "),a("code",[t._v("context.isRecovery")]),t._v(" в "),a("code",[t._v("context.isRestore")])])]),t._v(" "),a("h3",{attrs:{id:"useronlinecontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#useronlinecontext"}},[t._v("#")]),t._v(" UserOnlineContext")]),t._v(" "),a("ul",[a("li",[t._v("Переименован в "),a("code",[t._v("FriendActivityContext")])])]),t._v(" "),a("h3",{attrs:{id:"friendactivitycontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#friendactivitycontext"}},[t._v("#")]),t._v(" FriendActivityContext")]),t._v(" "),a("ul",[a("li",[t._v("Переименован подтип "),a("code",[t._v("user_online")]),t._v(" в "),a("code",[t._v("friend_online")])]),t._v(" "),a("li",[t._v("Переименован подтип "),a("code",[t._v("user_offline")]),t._v(" в "),a("code",[t._v("friend_offline")])]),t._v(" "),a("li",[t._v("Переименован геттер "),a("code",[t._v("context.isUserOnline")]),t._v(" в "),a("code",[t._v("context.isOnline")])]),t._v(" "),a("li",[t._v("Переименован геттер "),a("code",[t._v("context.isUserOffline")]),t._v(" в "),a("code",[t._v("context.isOffline")])]),t._v(" "),a("li",[t._v("Переименован геттер "),a("code",[t._v("context.isSelfExit")]),t._v(" в "),a("code",[t._v("context.isSelfLeave")])]),t._v(" "),a("li",[t._v("Переименован геттер "),a("code",[t._v("context.isTimeoutExit")]),t._v(" в "),a("code",[t._v("context.isTimeoutLeave")])]),t._v(" "),a("li",[t._v("Переименован геттер "),a("code",[t._v("context.createdAt")]),t._v(" в "),a("code",[t._v("context.eventAt")])]),t._v(" "),a("li",[t._v("Геттер "),a("code",[t._v("context.platform")]),t._v(" теперь возвращает ID платформы")])]),t._v(" "),a("h3",{attrs:{id:"readmessagescontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#readmessagescontext"}},[t._v("#")]),t._v(" ReadMessagesContext")]),t._v(" "),a("ul",[a("li",[t._v("Переименован в "),a("code",[t._v("MessagesReadContext")])])]),t._v(" "),a("h3",{attrs:{id:"messagesreadcontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#messagesreadcontext"}},[t._v("#")]),t._v(" MessagesReadContext")]),t._v(" "),a("ul",[a("li",[t._v("Переименован подтип "),a("code",[t._v("messages_inbox_read")]),t._v(" в "),a("code",[t._v("messages_read_inbox")])]),t._v(" "),a("li",[t._v("Переименован подтип "),a("code",[t._v("messages_outbox_read")]),t._v(" в "),a("code",[t._v("messages_read_outbox")])]),t._v(" "),a("li",[t._v("Переименован геттер "),a("code",[t._v("context.id")]),t._v(" в "),a("code",[t._v("context.localId")])])]),t._v(" "),a("h3",{attrs:{id:"messageallowcontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#messageallowcontext"}},[t._v("#")]),t._v(" MessageAllowContext")]),t._v(" "),a("ul",[a("li",[t._v("Переименован в "),a("code",[t._v("MessageSubscriptionContext")])])]),t._v(" "),a("h3",{attrs:{id:"messagesubscriptioncontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#messagesubscriptioncontext"}},[t._v("#")]),t._v(" MessageSubscriptionContext")]),t._v(" "),a("ul",[a("li",[t._v("Тип "),a("code",[t._v("message_subscribers")]),t._v(" переименован в "),a("code",[t._v("message_subscription")])])]),t._v(" "),a("h3",{attrs:{id:"keyboard"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#keyboard"}},[t._v("#")]),t._v(" Keyboard")]),t._v(" "),a("ul",[a("li",[t._v("Удалена константа "),a("code",[t._v("Keyboard.DEFAULT_COLOR")]),t._v(", используйте "),a("code",[t._v("Keyboard.SECONDARY_COLOR")])])]),t._v(" "),a("h3",{attrs:{id:"updates"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#updates"}},[t._v("#")]),t._v(" Updates")]),t._v(" "),a("ul",[a("li",[t._v("Все контексты теперь используют "),a("code",[t._v("undefined")]),t._v(" вместо "),a("code",[t._v("null")]),t._v(" для удобной деструктуризации, например:")])]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[t._v("updates"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message_new'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" text "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'default text'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'default text'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Вы ничего не написали'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("Удалён метод "),a("code",[t._v("updates.hear()")]),t._v(" и "),a("code",[t._v("updates.setHearFallbackHandler()")]),t._v(", используйте вместо этого пакет "),a("a",{attrs:{href:"https://github.com/negezor/vk-io/tree/master/packages/hear",target:"_blank",rel:"noopener noreferrer"}},[t._v("@vk-io/hear"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("Теперь используются "),a("a",{attrs:{href:"https://vk.com/dev/groups_events",target:"_blank",rel:"noopener noreferrer"}},[t._v("официальные именования событий"),a("OutboundLink")],1),t._v("\nНапример")])]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[t._v("updates"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message_new'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("Удален второй аргумент у "),a("code",[t._v("updates.startWebhook()")]),t._v(", вместо этого передавайте функцию в свойство "),a("code",[t._v("next")])])]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[t._v("updates"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("startWebhook")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ul",[a("li",[t._v("Версия polling'а была обновлена до "),a("code",[t._v("10")])]),t._v(" "),a("li",[t._v("Переименование опции "),a("strong",[t._v("pollingAttempts")]),t._v(" в "),a("strong",[t._v("pollingRetryLimit")])])]),t._v(" "),a("h3",{attrs:{id:"upload"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#upload"}},[t._v("#")]),t._v(" Upload")]),t._v(" "),a("ul",[a("li",[t._v("Методы "),a("code",[t._v("upload.storiesPhoto()")]),t._v(" и "),a("code",[t._v("upload.storiesVideo()")]),t._v(" теперь возвращают "),a("code",[t._v("StoryAttachment")])]),t._v(" "),a("li",[t._v("Удалён метод "),a("code",[t._v("upload.graffiti()")]),t._v(", используйте вместо него "),a("code",[t._v("upload.documentGraffiti()")]),t._v(" или "),a("code",[t._v("upload.messageGraffiti()")])]),t._v(" "),a("li",[t._v("Изменился формат "),a("code",[t._v("source")]),t._v(", теперь он принимает только два интерфейса:")])]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[t._v("upload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("messagePhoto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tsource"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tvalue"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://picsum.photos/200/300/?image=1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// filename: 'image.jpeg',")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// contentType: 'image/jpeg'")]),t._v("\n\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// contentLength?: number;")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("Или")]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[t._v("upload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("messagePhoto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tsource"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// uploadUrl?: string;")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// timeout?: number;")]),t._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Свойство values может быть массивом если загрузка в альбом")]),t._v("\n\t\tvalues"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tvalue"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://picsum.photos/200/300/?image=1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// filename: 'image.jpeg',")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// contentType: 'image/jpeg")]),t._v("\n\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// contentLength?: number;")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ul",[a("li",[t._v("У элемента в "),a("code",[t._v("source")]),t._v(" появилось свойство "),a("code",[t._v("contentLength")]),t._v(", позволяет указать размер загружаемого файла")])]),t._v(" "),a("blockquote",[a("p",[t._v("Если вы используете поток который не предоставляет информации о размере в байтах, вам следует указать свойство "),a("code",[t._v("contentLength")]),t._v(", так как иначе файл не будет загружен.\nЭто особенно актуально для метода "),a("code",[t._v("upload.video()")])])]),t._v(" "),a("h3",{attrs:{id:"callback-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#callback-service"}},[t._v("#")]),t._v(" Callback Service")]),t._v(" "),a("ul",[a("li",[t._v("Используйте метод "),a("code",[t._v("callbackService.onCaptcha()")]),t._v(" вместо сеттера "),a("code",[t._v("callbackService.captchaHandler")])]),t._v(" "),a("li",[t._v("Используйте метод "),a("code",[t._v("callbackService.onTwoFactor()")]),t._v(" вместо сеттера "),a("code",[t._v("callbackService.twoFactorHandler")])])]),t._v(" "),a("h3",{attrs:{id:"удаленные-экспорты"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#удаленные-экспорты"}},[t._v("#")]),t._v(" Удалённые экспорты")]),t._v(" "),a("ul",[a("li",[t._v("Удалён экспорт "),a("code",[t._v("attachmentTypes")]),t._v(", используйте "),a("code",[t._v("AttachmentType")])]),t._v(" "),a("li",[t._v("Удалён экспорт "),a("code",[t._v("defaultExtensions")]),t._v(", используйте "),a("code",[t._v("DefaultExtension")])]),t._v(" "),a("li",[t._v("Удалён экспорт "),a("code",[t._v("defaultContentTypes")]),t._v(", используйте "),a("code",[t._v("DefaultContentType")])]),t._v(" "),a("li",[t._v("Удалён экспорт "),a("code",[t._v("captchaTypes")]),t._v(", используйте "),a("code",[t._v("CaptchaType")])]),t._v(" "),a("li",[t._v("Удалён экспорт "),a("code",[t._v("messageSources")]),t._v(", используйте "),a("code",[t._v("MessageSource")])]),t._v(" "),a("li",[t._v("Удалён экспорт "),a("code",[t._v("resourceTypes")]),t._v(", используйте "),a("code",[t._v("ResourceType")])]),t._v(" "),a("li",[t._v("Удалён экспорт "),a("code",[t._v("updatesSources")]),t._v(", используйте "),a("code",[t._v("UpdateSource")])]),t._v(" "),a("li",[t._v("Удалён экспорт "),a("code",[t._v("apiErrors")]),t._v(", используйте "),a("code",[t._v("APIErrorCode")])]),t._v(" "),a("li",[t._v("Удалён экспорт "),a("code",[t._v("uploadErrors")]),t._v(", используйте "),a("code",[t._v("UploadErrorCode")])]),t._v(" "),a("li",[t._v("Удалён экспорт "),a("code",[t._v("updatesErrors")]),t._v(", используйте "),a("code",[t._v("UpdatesErrorCode")])]),t._v(" "),a("li",[t._v("Удалён экспорт "),a("code",[t._v("snippetsErrors")]),t._v(", используйте "),a("code",[t._v("ResourceErrorCode")])]),t._v(" "),a("li",[t._v("Удалён экспорт "),a("code",[t._v("sharedErrors")]),t._v(", используйте "),a("code",[t._v("SharedErrorCode")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);